<!--
TODOs:
- Where this should live? I started with ## header because I assume it will not be stand-alone.
- Should anything I mention in terms of the Developer Tools, etc have a screenshot?
- What is the best way to format the Common CSS Selectors section?
.-->

## CSS tips for R Markdown

Section \@ref(html-css) explains that you may style your HTML output with custom CSS code. To do this effectively, it is helpful to know how common R Markdown elements can be selected by CSS. This section documents some frequently occuring properties and recommends tools for exploring and identifying more complex elements on your own. 

This document assumes a basic knowledge of CSS concepts including selection by tag, class, or id. You may learn more about CSS in many free online tutorials such as https://www.w3schools.com/css/.

### Common CSS selectors

#### Headers 

Section made from Level 1 header with `# Some Name` -> <div>, classes = 'section level1', id = 'some-name'
Level 1 header itself with `# Some Name` -> <h1> 
Section with custom ID or class with # Part 1.3 {.a #b} -> <div id = 'b' class = 'section level1 a'>

#### Text

Normal text -> <p>
Bold text with **x** -> <strong>
Italics with *x* -> <em>
Code with `x` -> <code>
Lists -> <ul> (unordered), <ol> (ordered), <li> elements, new <ul> or <ol> for subbullets. Text wrapped in <p>s
Blockquote with `>` -> <blockquote>
Strikethrough with `~` -> <p><strikethrough>
Markdown table -> <table> with <tr> and <td>
Arbitrary section made with ::: MyDiv -> <div class = 'MyDiv'>
Link with `[]()` -> <a> 

#### Code 

Code chunk -> <pre class = 'r'><code class = 'hljs'> </code></pre>
Code output -> <pre><code class = 'hljs'>  </code></pre> 
mention hljs-number, hljs-string, hljs-keyword
Warning -> <pre> <code class = 'hljs'>

#### Figures

Images will have slightly different selectors depending on how they were included in R Markdown. 

Images inserted with markdown code (`![]()`) create an `<img>` element that is a child of a `<div>` with class `figure`.

Images inserted with R code (`knitr::include_graphics()`) create an `<img>` element that is a child of a `<p>` with no class. 

Similarly, R code which creates plots create an `<img>` element that is a child of a `<p>` with no class.

#### Combining selectors

Note that these selectors are typically most powerful when many are used together. With CSS, you may specify relationships such as "all elements having both of two specific classes", "the n-th child of a given ID", etc. The more you learn about CSS, the richer your vocabulary will become to describe complex and nuanced relationships.

### Tools for exploring HTML output

For more customization, you may have to do more research to find the right CSS selectors to describe what you want to do. Luckily, there are many tools to help you explore your HTML output efficiently. 

**Exploring Raw HTML**: First, an HTML file is a simple text document. In theory, you could open this file in any text editor and search through it. However, this is not the recommended approach. HTML output from R Markdown has a lot of text unrelated to the core, visible content of your document. This is particularly true when the document is self-contained (using the default option of `self_contained: true`) because all dependencies (e.g. images) are encoded within the document. This text makes understanding document structure much more challenging than necessary. Additionally, if you accidentally delete or modify raw HTML code it may be hard to repair. 

**Developer Tools**: Most major web browsers offer developer tools which help to navigate the sourcecode of any website or HTML document. Google Chrome's Elements Panel (https://developers.google.com/web/tools/chrome-devtools#elements) and Mozilla Firefox's Page Inspector (https://developer.mozilla.org/en-US/docs/Tools/Page_Inspector) are two examples. Using such interfaces, you may hover over either the code or the output to see relevant section of the other, and you can easily extract tags, classes, and IDs of each component. Such tools also make it easy to see what CSS is currently being applied to a given HTML element which may be useful when debugging CSS code which is not being applied correctly.

**Selector Gadget**: Similar to developer tools, the Selector Gadget browser add-in (https://selectorgadget.com/) is an open-source tool which allows you to determine appropriate CSS selectors for elements of an HTML document by hovering over them. Additionally, it shows which other items on the page are represented by the same set of selectors to help you understand everywhere your new style would be applied.

**Experimentation**: Finally, do not be afraid to experiment. It can sometimes be helpful to temporarily add style to items to help confirm or deny your understanding of the document structure. As a trivial example, the following CSS code draws brightly colored boxes around output at different levels of nesting. This could be useful to check visually review parent and child relationships between elements or notice invisible levels of nesting. 

```css
* * * * * { border: 3px solid red}
* * * * * * { border: 3px solid orange}
* * * * * * * { border: 3px solid yellow}
* * * * * * * * { border: 3px solid green}
* * * * * * * * * { border: 3px solid blue}
* * * * * * * * * * { border: 3px solid purple}
* * * * * * * * * * * { border: 3px solid pink}
```


